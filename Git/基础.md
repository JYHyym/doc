[参考资料](https://juejin.im/post/6844904191203213326#heading-21)

### 专用名词

- workSpace 工作区
- Index/Stage 暂存区
- Repository 仓库区（或本地仓库）
- Remote 远程仓库

### 常用命令

- 查看 git 配置文件

```
git config --list
```

- 查看提交历史

```
git log
```

- 提交本地代码到远程仓库

```
git add .
git commit -m [修改信息]
git push [-u] （首次提交需要）origin [branchname]
```

- 设置远程仓库

```
git remote set-url origin [url]
```

- 新建本地仓库

```
git init
git remote add origin [url]
git add .
git commit -m [修改注释]
git push -u origin [branchname]
```

- 分支

```
git branch 列出本地分支
git branch -r 列出所有远程分支
git branch -a 列出本地和远程分支
git checkout -b [branch] 新建分支,并切换到当前分支
git branch [branch] 新建分支，但仍停留在当前分支
git branch -d [branch] 删除分支
git push origin --delete [branch] 删除远程分支
```

- tag 标签

```
git tag -a version(版本号) -m '描述信息'  新建一个tag
git push origin [tagname] 显示推送到远程
git tag 查看所有标签
git tag -d [tagname] 删除标签
git push origin --delete <tagname> 删除远程标签
```

- 设置不需要提交的文件

```
vim .gitignore
node modules
```

[学习链接](https://git-scm.com/book/zh/v2)

- 本地分支不存在拉取远程分支

```
git checkout -b 本地分支名 origin/远程分支名
如果报错再次拉取一次 git pull
```

- 修改分支名

```
git branch -m oldbranch newbranch
```

- 本地分支与远程新分支关联起来

```
git push --set-upstream origin 分支名
```

- 撤销

```js
git reset HEAD 文件名 // 从缓存区修改
git checkout -- 文件名 // 撤销对文件做的修改
git checkout -b

```

- 删除

```js
git branch -d [tagname]

```

- merge

```js

git checkout -b hotfix
git commit -a -m "desc...."
git merge master // 合并master最新代码合并入到hotfix分支
```

- git clone 过慢 设置代理（需要科学上网,看代理地址）

```
# 只对github.com
git config --global http.https://github.com.proxy socks5://127.0.0.1:1080

# 取消代理
git config --global --unset http.https://github.com.proxy

```

# 拉取 tag 分支

```
git checkout -b new_branch_name tag_name
```

# 删除 commit

```
git log 查看commit提交记录以及commit-id

找到要删除的commit记录的前一个提交记录的commit-id

git rebase -i commitid

vim模式 i
将要删除的commit的pick改为drop
wq!保存退出

```

# 合并 commit

```

git rebase -i HEAD~4
```

# git rebase

https://zhuanlan.zhihu.com/p/87318673

```

pick：保留该commit（缩写:p）
reword：保留该commit，但我需要修改该commit的注释（缩写:r）
edit：保留该commit, 但我要停下来修改该提交(不仅仅修改注释)（缩写:e）
squash：将该commit和前一个commit合并（缩写:s）
fixup：将该commit和前一个commit合并，但我不要保留该提交的注释信息（缩写:f）
exec：执行shell命令（缩写:x）
drop：我要丢弃该commit（缩写:d）


```

### 回滚 git reset

https://www.jianshu.com/p/c2ec5f06cf1a

git reset --hard HEAD^1
回滚到上一个 commit

git reset --hard commit_id
回退到指定的 commit_id 版本

这就是--soft 和 --hard 的区别：

--hard 会清空工作目录和暂存区的改动;

而 --soft 则会保留工作目录的内容，并把因为保留工作目录内容所带来的新的文件差异放进暂存区。

reset 不加参数(mixed)：保留工作目录，并清空暂存区

记着使用 git push -f

### 查看 commit 提价

git log 查到 commitId

git show commitId
