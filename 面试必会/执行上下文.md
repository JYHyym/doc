# 执行上下文

  执行环境可以理解为代码运行时的环境。
  
  **执行环境定义了变量或函数有权访问的其他数据，决定它们的行为。每个执行环境都有一个与之关联的变量对象，在此环境的定义的函数和变量都会保存在这个变量对象中。**

  **执行环境因为宿主环境的不同而改变。** 在浏览器里是window，因此在全局的变量和函数都会自动挂载在window上。**执行环境栈的最底层永远是全局的上下文环境。**

  **每个函数都有自己的执行环境。** 当代码执行到一个函数里时，当前函数的执行环境将会在执行环境栈最顶层，待该函数执行完成后，执行环境销毁，回退到之前的执行环境。



  -----

  执行上下文总共有三种类型：

  - 全局执行上下文。只有一个，浏览器中的全局对象就是window对象，this指向这个全局对象。

  - 函数执行上下文。 存在无数个，只有在函数被调用的时候才会被创建，每次调用函数都会创建一个新的执行上下文。

  - Eval函数执行上下文。指的是运行在eval函数中的代码，不建议使用。



---- 

### 执行栈

执行栈也叫调用栈，具有LIFO（后进先出）结构，用于存储在代码执行期间创建的所有执行上下文。

首次运行JS代码时，会创建一个全局执行上下文并Push到当前的执行栈中。每当发生函数调用，引擎都会为该函数创建一个新的函数执行上下文并Push到当前执行栈的栈顶。

根据执行栈LIFO规则，当栈顶函数运行完成后，其对应的函数执行上下文将会从执行栈中Pop出，上下文控制权将移到当前执行栈的下一个执行上下文。

